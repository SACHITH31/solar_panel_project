<!DOCTYPE html>
<html>
  <head>
    <title>Solar Panel Efficiency</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Header -->
      <header class="dashboard-header">
        <h2>GPREC EEE_BLOCK_1 SOLAR DATA</h2>
      </header>

      <!-- Filters / Controls -->
      <section class="controls-card">
        <input type="date" id="datePicker" />
        <button onclick="onDateSelect()" class="okButton">OK</button>

        <div id="status">
          <span class="live-dot"></span>
          <span>LIVE (auto-updating every 2 minutes)</span>
        </div>

        <div id="last_updated"></div>

        <button
          id="downloadBtn"
          class="download-btn"
          onclick="downloadDashboardSection()"
        >
          â¬‡ Download View
        </button>

        <button id="monthViewBtn" class="download-btn">ðŸ“Š Month View</button>
        <div id="monthViewPopup" class="month-popup" style="display: none">
          <label>Month:</label>
          <select id="mvMonth">
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>

          <label>Year:</label>
          <select id="mvYear"></select>

          <button id="mvOkBtn" class="okButton">OK</button>
        </div>

        <div id="monthlyBarChartContainer" style="display: none">
          <div id="monthlyBarChart"></div>
        </div>

        <!-- <div class="date-nav-group">
          <button
            id="prevDateBtn"
            class="nav-date-btn"
            onclick="goToPreviousDate()"
          >
            <span class="icon">âŸ¨</span>
            <span>Previous</span>
          </button>

          <input type="date" id="todayDisplay" class="static-date" disabled />

          <button
            id="nextDateBtn"
            class="nav-date-btn"
            onclick="goToNextDate()"
          >
            <span>Next</span>
            <span class="icon">âŸ©</span>
          </button>
        </div> -->
      </section>

      <!-- Main Chart -->
      <div id="download-area">
        <section class="chart-card">
          <div id="chart_div"></div>
        </section>

        <!-- Alerts / Legend -->
        <section class="info-cards">
          <div id="custom_legend" class="alert-card">
            <span class="alert-icon">âš </span>
            <span
              >Sudden power drop detected (possible outage / inverter
              issue)</span
            >
          </div>
        </section>

        <!-- Summary Cards -->
        <section class="detailsCardContainer">
          <div id="live_watt" class="summary-card"></div>
          <div id="total_power" class="summary-card"></div>
          <div id="inverter-health" class="summary-card"></div>
          <div id="co2_saved" class="summary-card"></div>
        </section>

        <section class="metrics-table-card">
          <h3>Latest Inverter Metrics</h3>
          <table id="latestMetricsTable" class="metrics-table">
            <thead>
              <tr>
                <th>Parameter</th>
                <th>Latest Value</th>
              </tr>
            </thead>
            <tbody>
              <!-- rows will be filled from JS -->
            </tbody>
          </table>
        </section>
      </div>
      <!-- Events -->
      <section id="events" class="event-card"></section>
    </div>

    <script src="script.js"></script>
  </body>
</html>
